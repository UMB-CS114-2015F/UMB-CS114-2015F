%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CS114: Introduction to Programming in Java
% Copyright 2015 Pejman Ghorbanzade <mail@ghorbanzade.com>
% Creative Commons Attribution-ShareAlike 4.0 International License
% https://github.com/ghorbanzade/UMB-CS114-2015F/blob/master/LICENSE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def \topDirectory {.}
\def \texDirectory {\topDirectory/src/main/tex}

\documentclass[12pt,letterpaper,twoside]{article}
\usepackage{\texDirectory/template/style/directives}
\usepackage{\texDirectory/template/style/assignment}
\input{\texDirectory/template/config}

\usepackage[school]{\texDirectory/template/style/pgf-umlcd/pgf-umlcd}

\begin{document}

\doc{title}{Solution to Final Practice Exam}
\doc{points}{20}

\prepare{header}

\section*{Question 1}

The following code snippets either do not compile.
There are two distinct compilation problems in each code snippet.
You are expected to find and fix all errors so that given command-line argument will lead to expected output as indicated.

\begin{enumerate}[label=\textbf{(\alph*)}]

\item Execution Script \hfill Expected Output\\
\texttt{java HelloWorld Beacons} \hfill \texttt{Hello Beacons!}

\begin{lstlisting}
public class HelloWorld {
	public static void main(String args) {
		System.out.println("Hello" + args[0] "!");
	}
}
\end{lstlisting}

\item Execution Script \hfill Expected Output\\
\texttt{java Temperature 86} \hfill \texttt{30.00}

\begin{lstlisting}
public class Temperature {
	public static void main(String[] args) {
		double tempF = args[0];
		double tempC = 5 * (tempF - 32) / 9;
		System.out.printf("%.2d\n", tempC);
	}
}
\end{lstlisting}

\newpage

\item Execution Script \hfill Expected Output\\
\texttt{java Array 3} \hfill \texttt{6}

\begin{lstlisting}
public class Array {
	public static void main(String[] args) {
		sum = 0;
		int[] array = new int[5];
		for (int i = 1; i <= 5; i++) {
			array[i] = i;
			sum += i;
		}
		System.out.println(sum);
	}
}
\end{lstlisting}

\item Execution Script \hfill Expected Output\\
\texttt{java Random 5} \hfill integer $x$ where $0 \leq x < 5$

\begin{lstlisting}
public class Random {
	public static void main(String[] args) {
		int num = args[0];
		int random = getRandomNumber(num);
		System.out.println(random);
	}
	public static int getRandomNumber(num) {
		return (int) (Math.random() * num);
	}
}
\end{lstlisting}

\newpage

\item Execution Script \hfill Expected Output\\
\texttt{java CircleDemo 1} \hfill 3.14

\begin{lstlisting}
public class CircleDemo {
	public static void main(String[] args) {
		Circle circle = Circle(Double.parseDouble(args[0]));
		System.out.printf("%.2f\n", circle.getArea());
	}
}
public class Circle {
	private double radius;
	public Circle(double radius) {
		this.radius = radius;
	}
	public double getArea() {
		double area = Math.PI * Math.pow(this.radius, 2);
	}
}
\end{lstlisting}

\end{enumerate}

\subsection*{Solution}

\begin{enumerate}[label=\textbf{(\alph*)}]

\item Execution Script \hfill Expected Output\\
\texttt{java HelloWorld Beacons} \hfill \texttt{Hello Beacons!}
\lstinputlisting[firstline=12,language=java]{\topDirectory/src/main/java/f01/HelloWorld.java}

\item Execution Script \hfill Expected Output\\
\texttt{java Temperature 86} \hfill \texttt{30.00}
\lstinputlisting[firstline=12,language=java]{\topDirectory/src/main/java/f01/Temperature.java}

\newpage

\item Execution Script \hfill Expected Output\\
\texttt{java Array 3} \hfill \texttt{6}
\lstinputlisting[firstline=12,language=java]{\topDirectory/src/main/java/f01/Array.java}

\item Execution Script \hfill Expected Output\\
\texttt{java Random 5} \hfill integer $x$ where $0 \leq x < 5$
\lstinputlisting[firstline=12,language=java]{\topDirectory/src/main/java/f01/Random.java}

\newpage

\item Execution Script \hfill Expected Output\\
\texttt{java CircleDemo 1} \hfill 3.14
\lstinputlisting[firstline=12,language=java]{\topDirectory/src/main/java/f01/CircleDemo.java}
\lstinputlisting[firstline=12,language=java]{\topDirectory/src/main/java/f01/Circle.java}

\end{enumerate}

\newpage

\section*{Question 2}

The following code snippet compiles and runs without error.

Determine the output of the following program when user gives number four as command line argument.
Formulate the output based on any integer number given as command line argument.
Support your answer by explaining how the program works.

\lstinputlisting[firstline=12]{\topDirectory/src/main/java/f01/Math.java}

\subsection*{Solution}

For any integer number $n$, the program calculates $\sum\limits_{i=1}^n i^i$ and outputs the result.
In case five is given as command line argument, the output would be as shown in Equation \ref{eq2}.

\begin{equation}
\sum\limits_{i=1}^5 i^i = 1 + 2^2 + 3^3 + 4^4 = 288
\label{eq2}
\end{equation}

The program uses a nested for loop to implement Equation \ref{eq2}.
The outer \texttt{for} loop iterates from 1 to the number $n$ inclusive given by the user.
For each iteration $m$, the inner loop iterates from 1 to $m$ exclusive, each time multiplying $m$ by $m$, adding $m^m$ to the \texttt{sum} variable.
Program terminates by printing value stored in \texttt{sum} on the console.

\newpage

\section*{Question 3}

A student has developed the following code snippet for his CS114 assignment.
The program asks for a number $n$ and prints a triangle in $n$ number of lines
using star characters as shown below.

\lstinputlisting[firstline=12]{\topDirectory/src/main/java/f01/Triangle1.java}

\begin{terminal}
$ javac Triangle1.java
$ java Triangle1
Enter number of rows: 4
*
**
***
****
\end{terminal}

Just before submitting, the student realized that the printed triangle was supposed to be right-aligned.
Since he is running out of time, he has asked for your help to fix the problem.
Rewrite the program such to produce the output as shown below.

\begin{terminal}
$ javac Triangle2.java
$ java Triangle2
Enter number of rows: 4
   *
  **
 ***
****
\end{terminal}

\subsection*{Solution}

\lstinputlisting[firstline=12, language=java]{\topDirectory/src/main/java/f01/Triangle2.java}

\newpage

\section*{Question 4}

Write a static method with the following method signature that takes an integer $n$ and returns a two-dimensional array of size $n \times n$ whose elements are randomely generated integer numbers in range $[0, 10)$.

\begin{terminal}
public static int[][] generateMatrix(int size);
\end{terminal}

\subsection*{Solution}

The code snippet given below illustrates how to implement the method.

\lstinputlisting[firstline=12, language=java]{\topDirectory/src/main/java/f01/Matrix.java}

\newpage

\section*{Question 5}

A group of students are making an object-oriented java program that can record grades of multiple students (no more than 10) and display their averages.
The team has agreed that their program will have two classes; \texttt{Grader.java} that contains the main method and \texttt{Student.java} from which student objects are instantiated.
So far the students wrote a sample \texttt{Grader.java}, shown below, to demonstrate how student objects should be used.

\lstinputlisting[firstline=12]{\topDirectory/src/main/java/f01/Grader.java}

They are now trying to develop the Student class and are asking for your help.

\begin{enumerate}
	\item Write a UML diagram for the \texttt{Student} class that can be used with \texttt{Grader.java} file.
	\item Develop the \texttt{Student.java} file that implements your UML diagram.
\end{enumerate}

\newpage

\subsection*{Solution}

\begin{enumerate}
	\item The UML Diagram is provided in Figure \ref{figQ5}.

	\begin{figure}[H]
		\centering
		\begin{tikzpicture}
			\begin{class}[text width=9cm]{Employee}{0, 0}
				\attribute{- name: String}
				\attribute{- grades: int[]}
				\attribute{- numCourses: int}
				\operation{+ Student(name: String)}
				\operation{+ addGrade(grade: int): void}
				\operation{+ getAverage(): double}
			\end{class}
		\end{tikzpicture}
		\caption{UML Diagram for Student class}\label{figQ5}
	\end{figure}

	\item Following is an implementation of the Student class.

	\lstinputlisting[firstline=12,language=java]{\topDirectory/src/main/java/f01/Student.java}

\end{enumerate}

\newpage

\section*{Question 6}

A software developer was assigned to develop an Employee class for a simple accounting software for a small-business company.
Employees in this company are either interns or full time and they are all paid on weekly basis.
Interns are paid \$20 per hour and full-time employees are paid \$2000 per week regardless of how many hours they work.

In a development meeting, he proposed the UML diagram shown in Figure \ref{fig1} for the Employee class.
Some developers, however, argued that this design is prone to major security threats and needs minor modification.

Briefly explain what you think is the issue with this design.
Rewrite the UML diagram to fix the issue.

\begin{figure}[H]
	\centering
	\begin{tikzpicture}
		\begin{class}[text width=9cm]{Employee}{0, 0}
			\attribute{+ name: String}
			\attribute{+ numHours: num}
			\attribute{+ isIntern: boolean}
			\operation{+ Employee(name: String, isIntern: boolean)}
			\operation{+ work(numHours: int): void}
			\operation{+ getSalary(): int}
		\end{class}
	\end{tikzpicture}
	\caption{Proposed UML Diagram for Employee class}\label{fig1}
\end{figure}

\newpage

\subsection*{Solution}

The problem with proposed UML diagram is all attributes are declared as \texttt{public}.
This enables any other class to have direct access to the data stored in the object making it possible for others to change name and status of each employee as well as the number of hours they worked into anything they like.

To resolve the issue we can declare all attributes as private and provide methods for other classes to access the data of each object.
The revised UML Diagram is provided in Figure \ref{fig2}.

\begin{figure}[H]
	\centering
	\begin{tikzpicture}
		\begin{class}[text width=9cm]{Employee}{0, 0}
			\attribute{- name: String}
			\attribute{- numHours: num}
			\attribute{- isIntern: boolean}
			\operation{+ Employee(name: String, isIntern: boolean)}
			\operation{+ work(numHours: int): void}
			\operation{+ isIntern(): boolean}
			\operation{+ getName(): String}
			\operation{+ getSalary(): int}
		\end{class}
	\end{tikzpicture}
	\caption{Revised UML Diagram for Employee class}\label{fig2}
\end{figure}

\end{document}
